<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>README.md</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="tphpprown---библиотека-php-прикладных-функций">TPhpPrown - библиотека PHP-прикладных функций</h1>
<p>Библиотека TPhpPrown возникла из практической работы - из вопросов и необходимостей, которые появлялись при программировании сайтов на PHP; из различий между 5 и 7 версиями, которые необходимо было обыгрывать.<br>
Каждая функция библиотеки выполняет свою прикладную задачу: проверяет какое-либо условие в свершившемся событии или какую-нибудь возможность для предстоящего действия и выполняет само это действие, проверяет определенные характеристики или устанавливает некоторые значения.<br>
В состав библиотеки кроме функций, выполняющих определенные задачи входят и вспомогательные модули - инициализации, которые содержат в себе, как на складе, общие для всех функций константы, переменные, сообщения и другие сущности.</p>
<blockquote>
<p>М. В. Крутихина:  «Под прикладной задачей следует понимать сюжетную задачу, сформулированную в виде задачи-проблемы и удовлетворяющую следующим условиям:<br>
Вопрос должен быть поставлен в таком виде, в каком он обычно ставится на практике (решение имеет практическую значимость);<br>
Все величины (если они заданы) должны быть реальными, взятыми из жизни»</p>
</blockquote>
<p>Функции разбиты на группы в зависимости от своего назначения, каждая группа выделяется префиксом в своем имени (префикс может и отсутствовать “по жизни” - в той ситуации, когда функция возникала, префикс не был очевиден).</p>
<h3 id="общие-необязательные-префиксы-и-назначения-функций">1. Общие (необязательные) префиксы и назначения функций:</h3>
<p><strong>is</strong> - функция проверяет некоторое условие и возвращает true или false (например:<br>
isSubstrInUri - проверяет присутствие фрагмента в поступившем запросе сайта;<br>
isCalcInBrowser - проверяет возможность выполнения функции Calc в CSS текущего браузера);</p>
<p><strong>get</strong> - функция возвращает характеристику некоторого объекта или получает значение в результате заданного действия (например:<br>
getSiteDevice - определяет тип устройства, с которого запрошен сайт;<br>
getTranslit - выполняет прикладную транслитерацию (tve) русских букв);</p>
<p><strong>put</strong> - …</p>
<p><strong>Make</strong> - функция выполняет заданное действие и возвращает целочисленный признак состояния после этого действия (например:<br>
MakeCookie - устанавливает новое значение COOKIE в браузере и заменяет значение во внутреннем массиве $_COOKIE;<br>
MakeRegExp - отрабатывает регулярное выражение на тексте и трассирует разбор);</p>
<p><strong>View</strong> - функция представляет на экране сайта значения некоторого объекта (например:<br>
ViewArray - показывает содержимое простого массива;<br>
ViewGlobal - показывает значения глобальных переменных);</p>
<p><strong>Ctrl</strong> - функция проверяет …</p>
<h3 id="алфавитный-список-функций-библиотеки-и-вспомогательных-модулейинициализаций">2. Алфавитный список функций библиотеки и вспомогательных модулей/инициализаций:</h3>
<h6 id="vybrat-iz-stroki-podstroku-po-regulyarnomu-vyrazheniyu">vybrat-iz-stroki-podstroku-po-regulyarnomu-vyrazheniyu</h6>
<h4 id="findes---выбрать-из-строки-подстроку-соответствующую-регулярному-выражению."><a href="#findes">Findes</a> - выбрать из строки подстроку, соответствующую регулярному выражению.</h4>
<h6 id="opredelit-obshchie-konstanty-i-peremennye">opredelit-obshchie-konstanty-i-peremennye</h6>
<h4 id="iniconstmem---определить-общие-константы-и-переменные-библиотеки."><a href="#iniconstmem">iniConstMem</a> - определить общие константы и переменные библиотеки.</h4>
<h6 id="opredelit-obshchie-soobshcheniya-biblioteki">opredelit-obshchie-soobshcheniya-biblioteki</h6>
<h4 id="inierrmessage---определить-общие-сообщения-библиотеки."><a href="#inierrmessage">iniErrMessage</a> - определить общие сообщения библиотеки.</h4>
<h6 id="opredelit-populyarnye-regulyarnye-vyrazheniya-php">opredelit-populyarnye-regulyarnye-vyrazheniya-php</h6>
<h4 id="iniregexp---определить-популярные-регулярные-выражения-php."><a href="#iniregexp">iniRegExp</a> - определить популярные регулярные выражения PHP.</h4>
<h6 id="po-useragent-opredelit-rabotaet-li-funkciya-calc-dlya-css">po-useragent-opredelit-rabotaet-li-funkciya-calc-dlya-css</h6>
<h4 id="iscalcinbrowser---проанализировать-useragent-браузера-по-версиям-родительских-браузеров-и-определить-работает-ли-функция-calc-для-css"><a href="#iscalcinbrowser">isCalcInBrowser</a> - проанализировать UserAgent браузера по версиям родительских браузеров и определить работает ли функция Calc для CSS</h4>
<h6 id="makecookie-name-value-type-init-duration">makecookie-name-value-type-init-duration</h6>
<h4 id="makecookie---установить-новое-значение-cookie-в-браузере-заменить-это-значение-во-внутреннем-массиве-_cookie-и-установить-новое-значение-переменной-кукиса-в-сценарии"><a href="#makecookie">MakeCookie</a> - установить новое значение COOKIE в браузере, заменить это значение во внутреннем массиве $_COOKIE и установить новое значение переменной-кукиса в сценарии</h4>
<h6 id="makeregexp-pattern-text-matches-istrass">makeregexp-pattern-text-matches-istrass</h6>
<h4 id="makeregexp---отработать-регулярное-выражение-на-тексте-и-оттрассировать-разбор.-рекомендуется-использовать-только-для-трассировки.-для-выборки-подстроки-по-регулярному-выражению-следует-пользоваться-другими-функциями-например-findes"><a href="#makeregexp">MakeRegExp</a> - отработать регулярное выражение на тексте и оттрассировать разбор. Рекомендуется использовать только для трассировки. Для выборки подстроки по регулярному выражению следует пользоваться другими функциями (например, Findes)</h4>
<h6 id="makesession-name-value-type-init">makesession-name-value-type-init</h6>
<h4 id="makesession---установить-новое-значение-сессионной-переменной-и-вернуть-его-для-изменения-глобальной-переменной-сайтовой-страницы"><a href="#makesession">MakeSession</a> - установить новое значение сессионной переменной и вернуть его для изменения глобальной переменной сайтовой страницы</h4>
<h6 id="preobrazovat-znachenie-k-zadannomu-tipu">preobrazovat-znachenie-k-zadannomu-tipu</h6>
<h4 id="maketype---преобразовать-значение-к-заданному-типу"><a href="#maketype">MakeType</a> - преобразовать значение к заданному типу</h4>
<h6 id="soobshchenie-razrabotchika-ob-oshibke">soobshchenie-razrabotchika-ob-oshibke</h6>
<h4 id="makeusererror---вывести-сообщение-разработчика-об-ошибке-в-программируемом-модуле-или-сформировать-пользовательское-исключение"><a href="#makeusererror">MakeUserError</a> - вывести сообщение разработчика об ошибке в программируемом модуле или сформировать пользовательское исключение</h4>
<h3 id="рекомендации-по-именованию-переменных-при-программировании-сайтов-с-использованием-библиотеки-tphpprown.">3. Рекомендации по именованию переменных при программировании сайтов с использованием библиотеки TPhpPrown.</h3>
<p>Среди всех переменных, которые появляются при программировании сайтов, можно выделить четыре особенные группы:</p>
<p>а) <strong>переменные-кукисы</strong>. Это копии кукисов сайта в текущем браузере (то есть копии элементов суперглобального массива $_COOKIE). Базовой функцией для установки кукиса в PHP является функция <strong>setcookie()</strong>. Но в этом случае новое значение кукиса на странице сайта  появится только после её обновления. TPhpPrown предлагает использовать собственную функцию <strong>MakeCookie()</strong>.  Использование переменных-кукисов совместно с этой функцией позволяет работать с измененными значениями уже в текущем сценарии страницы;</p>
<p>б) <strong>параметры страниц сайта</strong>. Это переменные, которые являются характеристиками страниц и могут быть настроены пользователем сайта. В настоящее время это часть переменных-кукисов. В дальнейшем для параметров страниц сайта будут использоваться и данные в памяти браузера LocalStorage;</p>
<p>в) <strong>сессионные переменные</strong>. Это переменные, которые живут в течение одной сессии работы в браузере. Они являются копиями  элементов суперглобального массива $_SESSION. TPhpPrown предлагает, как стиль программирования, использовать сессионные переменные и переменные-кукисы. Это позволит отвлечься от соответствующих суперглобальных массивов и унифицировать работу с переменными.</p>
<p>TPhpPrown рекомендует применять следующие префиксы при  определении имен указанных групп переменных:</p>
<p><strong>$c_</strong> - для переменных-кукисов (например:<br>
$c_BrowEntry - число запросов сайта из браузера; $c_PersName - логин посетителя;  $c_PersEntry - счетчик посещений текущим посетителем);</p>
<p><strong>$p_</strong> - для параметров страниц сайта (например:<br>
$p_NewsForm - форма представления новостей; $p_NewsAmt - количество новостей в форме;  $p_HeightIns - количество строк в окне инструкции);</p>
<p><strong>$s_</strong> - сессионных переменных (например:<br>
$s_Counter - число обращений к странице за сессию; $s_NameNews - активированная лента новостей);</p>
<h3 id="описания-функций--и-вспомогательных-модулейинициализаций">4. Описания функций  и вспомогательных модулей/инициализаций:</h3>
<hr>
<h4 id="findes">Findes</h4>
<h4 id="выбрать-из-строки-подстроку-соответствующую-регулярному-выражению.">Выбрать из строки подстроку, соответствующую регулярному выражению.</h4>
<h5 id="функция-выполняет-конкретную-и-часто-возникающую-задачу---выбрать-из-строки-подстроку-по-заданному-регулярному-выражению-и-узнать-её-начальную-позицию-в-этой-строке.">Функция выполняет конкретную и часто возникающую задачу - выбрать из строки подстроку по заданному регулярному выражению и узнать её начальную позицию в этой строке.</h5>
<h5 id="findes-возвращает-первое-или-единственное-вхождение-подстроки-в-исходной-строке-а-в-случае-неудачи-возвращает-пустую-строку.">Findes возвращает первое или единственное вхождение подстроки в исходной строке, а в случае неудачи возвращает пустую строку.</h5>
<h5 id="через-третий-параметр-функция-по-ссылке-возвращает-позицию-найденного-фрагмента-начиная-с-нулевого-значения-или--1-если-фрагмент-не-найден.">Через третий параметр функция по ссылке возвращает позицию найденного фрагмента, начиная с нулевого значения, или -1, если фрагмент не найден.</h5>
<h5 id="v1.1-02.04.2019-23.05.2019">v1.1, 02.04.2019-23.05.2019</h5>
<p><strong>Синтаксис</strong></p>
<pre><code>$Result=Findes($preg,$string,&amp;$point)
</code></pre>
<p><strong>Параметры</strong></p>
<pre><code>$preg   - текст регулярного выражения;
$string - текст, который должен быть обработан регулярным выражением;
$point  - позиция начала найденного фрагмента после работы регулярного 
выражения (параметр по ссылке). $point=-1, если фрагмент не найден.
</code></pre>
<p><strong>Возвращаемое значение</strong></p>
<pre><code>$Result  - найденный фрагментов после работы регулярного выражения или
пустая строка, если фрагмент не найден.
</code></pre>
<h6 id="в-список"><a href="#vybrat-iz-stroki-podstroku-po-regulyarnomu-vyrazheniyu">в список</a></h6>
<hr>
<h4 id="iniconstmem">iniConstMem</h4>
<h4 id="определить-общие-константы-и-переменные-библиотеки.">Определить общие константы и переменные библиотеки.</h4>
<h5 id="модуль-определяет-общие-константы-а-также-переменные-которые-используются-в-различных-функциях-библиотеки-и-в-вызывающих-их-внешних-программах-и-сценариях.">Модуль определяет общие константы (а также переменные), которые используются в различных функциях библиотеки и в вызывающих их внешних программах, и сценариях.</h5>
<h5 id="первая-группа-констант-используются-для-указания-режимов-вывода-сообщений-библиотеки.-tphpprown-позволяет-выводить-сообщения-четырьмя-способами">Первая группа констант используются для указания режимов вывода сообщений библиотеки. TPhpPrown позволяет выводить сообщения четырьмя способами:</h5>
<h5 id="в-текущей-позиции-сайта">в текущей позиции сайта,</h5>
<h5 id="через-исключение-с-пользовательской-ошибкой">через исключение с пользовательской ошибкой,</h5>
<h5 id="в-дополнительном-блоке-для-сообщения-в-дополнительном-div-е">в дополнительном блоке для сообщения (в дополнительном div-е),</h5>
<h5 id="в-диалоговом-окне-с-помощью-jqueryui.">в диалоговом окне с помощью jQueryUi.</h5>
<h5 id="вторая-группа-констант-определяет-семь-типов-переменных-используемых-в-библиотеке.">Вторая группа констант определяет семь типов переменных, используемых в библиотеке.</h5>
<h5 id="v1.1-26.01.2019-20.05.2019">v1.1, 26.01.2019-20.05.2019</h5>
<p><strong>Режимы вывода сообщений об ошибках</strong></p>
<pre><code>rvsCurrentPos:  -1 - в текущей позиции сайта;
rvsTriggerError: 0 - исключение с пользовательской ошибкой;  
rvsMakeDiv:      1 - в дополнительном div-е для сообщения;   
rvsDialogWindow: 2 - в диалоговом окне с помощью JQueryUI.
</code></pre>
<p><strong>Типы переменных</strong></p>
<pre><code>tArr: array    - массивы (упорядоченные соответствия значений и ключей);
tObj: object   - объекты, представители определённого класса;    
Int: integer   - целые числа (из множества {...,-2,-1,0,1,2,...});
tFloat: double - числа с плавающей точкой;    
tStr: string   - наборы символов=байт (256 различных значений);   
tBool: boolean - простейшийе типы, выражающие истинность значения;  
tNull: null    - переменные без значения.  
</code></pre>
<h6 id="в-список-1"><a href="#opredelit-obshchie-konstanty-i-peremennye">в список</a></h6>
<hr>
<h4 id="inierrmessage">iniErrMessage</h4>
<h4 id="определить-общие-сообщения-библиотеки.">Определить общие сообщения библиотеки.</h4>
<h5 id="модуль-собирает-в-одном-файле-константы-соответствующие-пользовательским-ошибочным-сообщениям-и-предупреждениям-со-всех-функций-библиотеки.">Модуль собирает в одном файле константы, соответствующие пользовательским ошибочным сообщениям и предупреждениям со всех функций библиотеки.</h5>
<h5 id="v1.1-26.01.2019-20.05.2019-1">v1.1, 26.01.2019-20.05.2019</h5>
<h6 id="в-список-2"><a href="#opredelit-obshchie-soobshcheniya-biblioteki">в список</a></h6>
<hr>
<h4 id="iniregexp">iniRegExp</h4>
<h4 id="определить-популярные-регулярные-выражения-php.">Определить популярные регулярные выражения PHP.</h4>
<h5 id="модуль-собирает-в-одном-файле-часто-используемые-регулярные-выражения-в-библиотеке-tphpprown-и-других-php-сценариях.">Модуль собирает в одном файле часто используемые регулярные выражения в библиотеке TPhpPrown и других PHP-сценариях.</h5>
<h5 id="большинство-регулярных-выражений-не-используют-модификаторы-так-как-они--ориентированы-на-латинские-символы-и-цифры.">Большинство регулярных выражений не используют модификаторы, так как они  ориентированы на латинские символы и цифры.</h5>
<h5 id="в-тех-случаях-когда-используется-кириллица-в-тексте-поиска-и-в-регулярном-выражении-например-при-поиске-фамилии-инициалов-то-употребляется-модификатор-u.">В тех случаях, когда используется кириллица в тексте поиска и в регулярном выражении (например, при поиске фамилии-инициалов), то употребляется модификатор “/u”.</h5>
<h5 id="при-отлавливании-и-проверке-адреса-электронной-почты-в-регулярном-выражении-используется-модификатор-i-заставляющий-проверять-и-большие-верхнего-регистра---прописные-буквы-и-малые-нижнего-регистра---строчные.">При отлавливании и проверке адреса электронной почты в регулярном выражении используется модификатор “/i”, заставляющий проверять и большие (верхнего регистра - прописные) буквы, и малые (нижнего регистра - строчные).</h5>
<h5 id="v1.1-21.05.2019-02.04.2018">v1.1, 21.05.2019-02.04.2018</h5>
<h6 id="в-список-3"><a href="#opredelit-populyarnye-regulyarnye-vyrazheniya-php">в список</a></h6>
<hr>
<h4 id="iscalcinbrowser">isCalcInBrowser</h4>
<h4 id="проанализировать-useragent-браузера-по-версиям-родительских-браузеров-и-определить-работает-ли-функция-calc-для-css">Проанализировать UserAgent браузера по версиям родительских браузеров и определить работает ли функция Calc для CSS</h4>
<h5 id="функция-iscalcinbrowser-указывает-о-возможности-работы-функция-calc-в-css-просматривая-содержимое-строки-useragent-перебирая-имена-всех-родительских-браузеров-и-проверяя-их-версии.">Функция isCalcInBrowser указывает о возможности работы функция Calc в CSS, просматривая содержимое строки UserAgent, перебирая имена всех родительских браузеров и проверяя их версии.</h5>
<blockquote>
<p>Родительскими браузерами в функции isCalcInBrowser называются наименования браузеров, которые упоминает разработчик в строке UserAgent текущего браузера, то есть того, который показывает в текущий момент страницу сайта.</p>
</blockquote>
<h5 id="после-приоритетного-анализа-версий-браузеров-принимается-решение-о-наличии-функции-calc-в-css--по-следующему-правилу">После приоритетного анализа версий браузеров принимается решение о наличии функции Calc в CSS  по следующему правилу:</h5>
<h5 id="а-вначале-проверяем-по-браузеру-chrome.-если-он-указан-и-версия-больше-55-то-calc-работает-иначе-смотрим-дальше">а) вначале проверяем по браузеру Chrome. Если он указан и версия больше 55, то Calc работает, иначе смотрим дальше;</h5>
<h5 id="б-проверяем-по-браузеру-safari.-если-он-указан-и-версия-больше-537.35-то-calc-работает-иначе-смотрим-дальше">б) проверяем по браузеру Safari. Если он указан и версия больше 537.35, то Calc работает, иначе смотрим дальше;</h5>
<h5 id="в-проверяем-по-браузеру-firefox.-если-он-есть-и-версия-больше-30-то-calc-работает">в) проверяем по браузеру Firefox. Если он есть и версия больше 30, то Calc работает;</h5>
<h5 id="г-в-остальных-случаях-считаем-что-calc-не-работает.">г) в остальных случаях считаем, что Calc не работает.</h5>
<h5 id="в-случае-противоречивой-информации-например-для-useragent-mozilla5.0-windows-nt-6.1-win64-x86-applewebkit537.36-khtml-like-gecko-chrome55.0.2883.87-safari537.36-определится-что-функция-calc-работает-по-safari537.36--хотя-по-chrome55.0.2883.87-этого-не-следует.">В случае противоречивой информации, например для UserAgent: <em><strong>Mozilla/5.0 (Windows NT 6.1; Win64; x86) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36</strong></em> определится, что функция Calc работает по Safari/537.36  (хотя по Chrome/55.0.2883.87 этого не следует).</h5>
<h5 id="v1.0-13.02.2019-ревизия-будет-выполнена-в-02.2020">v1.0, 13.02.2019 (ревизия будет выполнена в 02.2020)</h5>
<p><em><strong>Синтаксис</strong></em></p>
<pre><code>$Result=isCalcInBrowser($UserAgent,$ModeError=rvsCurrentPos);
</code></pre>
<p><em><strong>Параметры</strong></em></p>
<pre><code>$UserAgent - UserAgent браузера
$ModeError - режим вывода сообщения об ошибке (по умолчанию в текущей позиции сайта)
</code></pre>
<p><em><strong>Возвращаемое значение</strong></em></p>
<pre><code>$Result=true, если версии UserAgent показывают о возможности 
работы функция Calc в CSS
</code></pre>
<p><em><strong>Зарегистрированные ошибки/исключения</strong></em></p>
<pre><code>1 - "В UserAgent присутствует несколько браузеров";
2 - "Неверная или отсутствует версия браузера".
</code></pre>
<p><em><strong>Комментарий</strong></em><br>
Фрагменты содержимого UserAgent некоторых браузеров на 13.02.2019 и возможность<br>
работы функция Calc в CSS:</p>
<pre><code>Mozilla/5.0(Windows NT 10.0;Win64;x64) AppleWebKit/537.36 (KHTML,like Gecko)

Chrome/56.0.2924.92  Safari/537.36 	                             Орбитум  +
Сhrome/61.0.3163.69  Safari/537.36 Freeu/61.0.3163.69              Freeu  +
Chrome/61.0.3163.79  Safari/537.36 Maxthon/5.2.6.1000	         Maxthon  +
Chrome/61.0.3163.125 Safari/537.36 Amigo/61.0.3163.125	           Amigo  +
Chrome/64.0.3282.140 Safari/537.36 Edge/17.17134                    Edge  +
Chrome/70.0.3538.102 Safari/537.36 OPR/57.0.3098.116               Opera  +
Chrome/71.0.3578.98  Safari/537.36                                Chrome  +
Chrome/71.0.3578.99  Safari/537.36 YaBrowser/19.1.0.2644          Yandex  +

Safari/534.57.2	                                                  Safari  -
Safari/537.21        QupZilla/1.8.6	                            QupZilla  -
    		
Firefox/31.0         K-Meleon/75.1	                            K-Meleon  +
Firefox/65.0	                                                 Firefox  +
    
Trident/7.0                                                        Avant  -
</code></pre>
<h6 id="в-список-4"><a href="#po-useragent-opredelit-rabotaet-li-funkciya-calc-dlya-css">в список</a></h6>
<hr>
<h4 id="makecookie">MakeCookie</h4>
<h4 id="установить-новое-значение-cookie-в-браузере-заменить-это-значение-во-внутреннем-массиве-_cookie-и-установить-новое-значение-переменной-кукиса-в-сценарии">Установить новое значение COOKIE в браузере, заменить это значение во внутреннем массиве $_COOKIE и установить новое значение переменной-кукиса в сценарии</h4>
<h4 id="v1.2-31.05.2019">v1.2, 31.05.2019</h4>
<p><em><strong>Синтаксис</strong></em></p>
<pre><code>$Result=MakeCookie($Name,$Value,$Type=tStr,$Init=false,$Duration=0x6FFFFFFF);
</code></pre>
<p><em><strong>Параметры</strong></em></p>
<pre><code>$Name - имя кукиса в браузере клиента (как правило, по имени кукиса 
формируется глобальная переменная сайтовой страницы добавлением префикса
"с_". Например: "BrowEntry" --&gt; "$с_BrowEntry");

$Value - значение кукиса браузера, это же значение во внутреннем массиве    
$_COOKIE и у соответствующей глобальной переменной сайтовой страницы;

$Type - константа, определяющая тип значения: tArr, tObj, tInt, tFloat, 
tStr, tBool, tNull. По умолчанию - tStr.

$Init = true, это означает, что требуется установить указанное значение 
кукиса, только в том случае, если кукиса еще не было. В обычных условиях
(по умолчанию, когда $Init=false) значение кукиса меняется всегда.
</code></pre>
<p><em><strong>Возвращаемое значение</strong></em></p>
<pre><code>$Result - установленное значение COOKIE в браузере, во внутреннем массиве
$_COOKIE и переменной-кукиса в сценарии сайтовой страницы
</code></pre>
<p><em><strong>Замечание</strong></em></p>
<pre><code>При изменении кукиса функцией setcookie меняется только значение кукиса в
браузере, а значение его в массиве $_COOKIE остается без изменения. Поэтому 
для синхронизации значений в этом случае следует использовать MakeCookie.
</code></pre>
<h6 id="в-список-5"><a href="#makecookie-name-value-type-init-duration">в список</a></h6>
<hr>
<h4 id="makeregexp">MakeRegExp</h4>
<h4 id="отработать-регулярное-выражение-на-тексте-и-оттрассировать-разбор.-рекомендуется-использовать-только-для-трассировки.-для-выборки-подстроки-по-регулярному-выражению-следует-пользоваться-другими-функциями-например-findes">Отработать регулярное выражение на тексте и оттрассировать разбор. Рекомендуется использовать только для трассировки. Для выборки подстроки по регулярному выражению следует пользоваться другими функциями (например, Findes)</h4>
<h4 id="v1.1-21.05.2019">v1.1, 21.05.2019</h4>
<p><em><strong>Синтаксис</strong></em></p>
<pre><code>$Result=MakeRegExp($pattern,$text,&amp;$matches=null,$isTrass=false);
</code></pre>
<p><em><strong>Параметры</strong></em></p>
<pre><code>$pattern - текст регулярного выражения;
$text    - текст, который должен быть обработан регулярным выражением;
$matches - массив найденных фрагментов и позиций их начала после работы
регулярного выражения (параметр по ссылке);
$isTrass=true, если следует выполнить трассировку
найденных соответствий регулярному выражению.
</code></pre>
<p><em><strong>Возвращаемое значение</strong></em></p>
<pre><code>$Result  - количество найденных соответствий регулярному выражению. 
$Result=0, если соответствий не найдено.
</code></pre>
<p><em><strong>Зарегистрированные ошибки/исключения</strong></em></p>
<pre><code>1 - "Устарела выборка подстроки регулярным выражением".
</code></pre>
<h6 id="в-список-6"><a href="#makeregexp-pattern-text-matches-istrass">в список</a></h6>
<hr>
<h4 id="makesession">MakeSession</h4>
<h4 id="установить-новое-значение-сессионной-переменной-и-вернуть-его-для-изменения-глобальной-переменной-сайтовой-страницы">Установить новое значение сессионной переменной и вернуть его для изменения глобальной переменной сайтовой страницы</h4>
<h4 id="v1.1-31.05.2018">v1.1, 31.05.2018</h4>
<p><strong>Синтаксис</strong></p>
<pre><code>$Result=MakeSession($Name,$Value,$Type,$Init=false);
</code></pre>
<p><strong>Параметры</strong></p>
<pre><code>$Name  - имя сессионной переменной (как правило, по имени сессионной переменной 
формируется глобальная переменная сайтовой страницы добавлением префикса "s_".  
Например: "Counter" --&gt; "$s_Counter");
$Value - значение сессионной переменной и соответствующей глобальной переменная сайтовой страницы;
$Type  - константа, определяющая тип значения: array, object, integer,
double, string, boolean, null.
$Init  = true, это означает, что требуется установить указанное значение 
сессионной переменной, только в том случае, если её еще не было. 
Обычно (по умолчанию, когда $Init=false) значение переменной меняется 
всегда.
</code></pre>
<p><strong>Возвращаемое значение</strong></p>
<pre><code>$Result  - установленное значение сессионной переменной и
соответствующей глобальной переменной сайтовой страницы.
</code></pre>
<h6 id="в-список-7"><a href="#makesession-name-value-type-init">в список</a></h6>
<hr>
<h4 id="maketype">MakeType</h4>
<h4 id="преобразовать-значение-к-заданному-типу">Преобразовать значение к заданному типу</h4>
<p>В PHP не требуется строгого определения типа переменной. Каждая переменная может поменять свой тип в зависимости от контекста кода. Это и плохо и хорошо.<br>
Хорошо то, что в большинстве случаев можно не думать о типе переменной,  но существуют ситуации, когда такая универсальность вызывает многозначные толкования и может быть источником ошибок. Это плохо. Например: при формировании упорядоченных списков или массивов, или когда требуется работа с размерностями в числах с плавающей точкой.<br>
В этих случаях можно воспользоваться процедурой приведения типов <a href="https://www.php.net/manual/ru/language.types.type-juggling.php#language.types.typecasting">https://www.php.net/manual/ru/language.types.type-juggling.php#language.types.typecasting</a> или использовать функцию <strong>MakeType</strong>. Что применять определяется требованиями Вашего стиля программирования.</p>
<pre><code>Функция MakeType преобразует переданное значение к заданному типу 
и возвращает его в соответствии с указанной константой типа:

tArr   - array, массив (упорядоченное соответствия значений и ключей);
tObj   - object, объект (представитель определённого класса);
tInt   - integer, целое число (из множества {...,-2,-1,0,1,2,...});
tFloat - double, число с плавающей точкой
tStr   - string, набор символов=байт (256 различных значений)
tBool  - boolean, простейший тип, выражающие истинность значения
tNull  - null, переменные без значения
</code></pre>
<h5 id="v1.1-26.04.2018-24.05.2019">v1.1, 26.04.2018-24.05.2019</h5>
<p><strong>Синтаксиc</strong></p>
<pre><code>$Result=MakeType($Value,$Type);
</code></pre>
<p><strong>Параметры</strong></p>
<pre><code>$Value  - значение переменной, которое следует привести к заданному типу;
$Type   - константа, определяющая тип значения: tArr, tObj, tInt, 
tFloat, tStr, tBool, tNull.
</code></pre>
<p><strong>Возвращаемое значение</strong></p>
<pre><code>$Result  - переданное значение функции заданного типа или null, если тип значения указан неверно
</code></pre>
<h6 id="в-список-8"><a href="#preobrazovat-znachenie-k-zadannomu-tipu">в список</a></h6>
<hr>
<h4 id="makeusererror">MakeUserError</h4>
<h4 id="вывести-сообщение-разработчика-об-ошибке-в-программируемом-модуле-или-сформировать-пользовательское-исключение">Вывести сообщение разработчика об ошибке в программируемом модуле или сформировать пользовательское исключение</h4>
<h5 id="функция-makeusererror-выводит-сообщение-из-разрабатываемого-программного-модуля-при-возникновении-ошибочной-ситуации.-информационное-сообщение-об-этом-выводится-в-одном-из-четырёх-режимов">Функция MakeUserError выводит сообщение из разрабатываемого программного модуля при возникновении ошибочной ситуации. Информационное сообщение об этом выводится в одном из четырёх режимов:</h5>
<h5 id="в-режиме-mode--rvscurrentpos-просто-выводится-сообщение-в-текущей-позиции-сайта.-данный-режим-используется-при-тестировании-модулей">в режиме $Mode = rvsCurrentPos просто выводится сообщение в текущей позиции сайта. Данный режим используется при тестировании модулей;</h5>
<h5 id="в-режиме-по-умолчанию-mode--rvstriggererror-вызывается-исключение-с-пользовательской-ошибкой-через-trigger_errormessageerrtype">в режиме по умолчанию $Mode = rvsTriggerError вызывается исключение с пользовательской ошибкой через trigger_error($Message,$errtype),</h5>
<h5 id="где-message---текст-сообщения">где $Message - текст сообщения,</h5>
<h5 id="errtype-может-быть-одним-из-значений-e_user_error-e_user_warning-e_user_notice-e_user_deprecated.-по-умолчанию-e_user_error">$errtype может быть одним из значений E_USER_ERROR, E_USER_WARNING, E_USER_NOTICE, E_USER_DEPRECATED. По умолчанию E_USER_ERROR;</h5>
<h5 id="в-режиме-mode--rvsmakediv-предполагается-что-ошибка-произошла-в-php-коде-до-разворачивания-html-страницы-и-в-этом-случае-формируется-дополнительный-div-сообщения-с-iders">в режиме $Mode = rvsMakeDiv предполагается, что ошибка произошла в php-коде до разворачивания html-страницы и, в этом случае, формируется дополнительный div сообщения с id=“Ers”;</h5>
<h5 id="в-режиме-mode--rvsdialogwindow-разворачивается-сообщение-в-диалоговом-окне-с-помощью-jqueryui.-в-этом-случае-на-вызывающем-сайте-должны-быть-подключены-модули-jqueryjquery-uijquery-ui.css-например-от-microsoft">в режиме $Mode = rvsDialogWindow разворачивается сообщение в диалоговом окне с помощью JQueryUI. В этом случае на вызывающем сайте должны быть подключены модули jquery,jquery-ui,jquery-ui.css, например от Microsoft:</h5>
<pre><code>&lt;link rel="stylesheet" type="text/css"
href="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.3/themes/ui-lightness/jquery-ui.css"&gt;
&lt;script
   src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.2.min.js"&gt;
&lt;/script&gt;
&lt;script
   src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.11.2/jquery-ui.min.js"&gt;
&lt;/script&gt;
</code></pre>
<h5 id="функция-makeusererror-выделяет-два-вида-ошибок-контроллируемые-и-неконтроллируемые-и-определяет-их-следующим-образом">Функция MakeUserError выделяет два вида ошибок (контроллируемые и неконтроллируемые) и определяет их следующим образом:</h5>
<h5 id="а-ошибка-является-контроллируемой-в-случае-когда-известно-в-каком-месте-сайта-она-может-возникнуть-и-таким-образом-сообщение-об-ошибке-можно-вывести-на-экран-по-разметке-сайта">а) ошибка является контроллируемой в случае, когда известно в каком месте сайта она может возникнуть и, таким образом, сообщение об ошибке можно вывести на экран по разметке сайта;</h5>
<h5 id="б-в-остальных-случаях-ошибка-является-неконтроллируемой-и-вывод-сообщения-об-ошибке-выполняется-на-отдельной-странице">б) в остальных случаях ошибка является неконтроллируемой и вывод сообщения об ошибке выполняется на отдельной странице;</h5>
<h5 id="в-по-умолчанию-функция-генерирует-неконтроллируемую-ошибкуисключение-через-trigger_errormessagee_user_error-предполагая-на-верхнем-уровне-обработку-ошибки-через-сайт-doortry.ru-где-неконтроллируемая-ошибка-возникает-на-странице-исключения-с-трассировкой-его-всплывания">в) по умолчанию функция генерирует неконтроллируемую ошибку/исключение через trigger_error($Message,E_USER_ERROR), предполагая на верхнем уровне обработку ошибки через сайт <a href="http://doortry.ru">doortry.ru</a>, где неконтроллируемая ошибка возникает на странице исключения с трассировкой его всплывания;</h5>
<h5 id="v1.4-17.02.2019-12.01.2020">v1.4, 17.02.2019-12.01.2020</h5>
<p><em><strong>Синтаксис</strong></em><br>
<code>MakeUserError($Mess,$Prefix='TPhpPrown',$Mode=0,$errtype=E_USER_ERROR,$div='Ers')</code></p>
<p><em><strong>Параметры</strong></em></p>
<pre><code>$Mess    - текст сообщения об ошибке/исключении;
$Prefix  - префикс сообщения, указывающий на программную систему, в модуле которой возникла ошибка/исключение;
$Mode    - режим вывода сообщений: rvsCurrentPos, rvsTriggerError, rvsMakeDiv, rvsDialogWindow;
$errtype - тип ошибки/исключения: E_USER_ERROR,E_USER_WARNING,E_USER_NOTICE,E_USER_DEPRECATED;
$div     - имя div-а для сообщения в режимах rvsMakeDiv,rvsDialogWindow. По умолчанию 'Ers'.
</code></pre>
<p><em><strong>Возвращаемое значение</strong></em></p>
<pre><code>$Result=true, если сообщение сформировано без ошибок
</code></pre>
<p><em><strong>Зарегистрированные ошибки/исключения</strong></em></p>
<pre><code>define ("WrongTypeError", "Неверно указан тип ошибки");
</code></pre>
<h6 id="в-список-9"><a href="#soobshchenie-razrabotchika-ob-oshibke">в список</a></h6>
<hr>
</div>
</body>

</html>
